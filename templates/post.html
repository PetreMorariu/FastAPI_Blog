{% extends "layout.html" %}
{% block content %}
  <article class="content-section py-3 px-4 mb-4">
    <div class="d-flex align-items-start gap-4">
      <img class="rounded-circle article-img flex-shrink-0"
           src="{{ post.author.image_path }}"
           alt="{{ post.author.username }}'s profile picture"
           width="64"
           height="64"
           loading="lazy">
      <div class="flex-grow-1">
        <div class="article-metadata mb-2">
          <a class="me-2" href="{{ url_for('user_posts', user_id=post.author.id) }}">{{ post.author.username }}</a>
          <small class="text-body-secondary">{{ post.date_posted.strftime('%B %d, %Y') }}</small>
        </div>
        <h2 class="article-title">{{ post.title }}</h2>
        <p class="article-content">{{ post.content }}</p>

        <!-- Only show edit/delete options if user_id is 1 (TEMPORARY - until authentication) -->
        {% if post.user_id == 1 %}
            <div class="post-actions mt-3 pt-3 border-top">
            <button type="button"
                    class="btn btn-outline-secondary me-1"
                    data-bs-toggle="modal"
                    data-bs-target="#editModal">Edit Post</button>
            <button type="button"
                    class="btn btn-outline-danger"
                    data-bs-toggle="modal"
                    data-bs-target="#deleteModal">Delete Post</button>
            </div>
        {% endif %}

      </div>
    </div>
  </article>

  <!-- Delete Confirmation Modal -->
  <div class="modal fade"
       id="deleteModal"
       tabindex="-1"
       aria-labelledby="deleteModalLabel"
       aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="deleteModalLabel">Delete Post?</h5>
          <button type="button"
                  class="btn-close"
                  data-bs-dismiss="modal"
                  aria-label="Close"></button>
        </div>
        <!-- TODO: <form action="#" method="post"> -->
        <form action="#">
          <div class="modal-body">Are you sure you want to delete this post? This action cannot be undone.</div>
          <div class="modal-footer">
            <button type="button"
                    class="btn btn-outline-secondary"
                    data-bs-dismiss="modal">Cancel</button>
            <button type="submit" class="btn btn-outline-danger">Delete</button>
          </div>
        </form>
      </div>
    </div>
  </div>
{% endblock content %}
